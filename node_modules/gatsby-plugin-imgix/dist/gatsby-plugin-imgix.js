function r(r){return r&&"object"==typeof r&&"default"in r?r.default:r}var t=require("fp-ts/lib/Array"),n=require("fp-ts/lib/Option"),e=require("fp-ts/lib/Record"),i=require("fp-ts/lib/Eq"),u=require("fp-ts/lib/Ord"),o=require("fp-ts/lib/pipeable"),a=r(require("node-fetch")),c=r(require("md5")),s=require("fp-ts/lib/TaskEither"),f=require("fp-ts/lib/Semigroup");function p(){return(p=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}return r}).apply(this,arguments)}require("fp-ts/lib/function").flow(function(r){return s.tryCatch(function(){return a(r)},function(r){return new Error(String(r))})},s.chain(function(r){return s.rightTask(function(){return r.buffer()})}),s.chain(function(r){return s.right(r.toString("base64"))}));var h=f.getObjectSemigroup(),l=function(r){return function(t){return t.join(r)}},d=[1,1.5,2],m=[.25,.5,1.5,2],g={w:100,blur:15,q:20},b=function(r,i){return function(u){return o.pipe(u,e.filterMap(function(r){return n.some(void 0===r?void 0:String(r))}),function(r){return function(n){var i,u,a,c=new URL(r),s=o.pipe(n,e.reduceWithIndex([],function(r,n,e){return void 0===e?t.cons(r,n):n})),f=o.pipe(n,e.filter(function(r){return void 0!==r})),p=(i=c.searchParams,u=new URLSearchParams(f),a=new URLSearchParams(i.toString()),u.forEach(function(r,t){null==r?a.delete(t):a.set(t,r)}),a);return p.forEach(function(r,t){s.includes(t)&&p.delete(t)}),c.search=p.toString(),c.toString()}}(r),function(r){return function(t){return o.pipe(r,n.fold(function(){return t},function(r){return o.pipe(t,function(r){var t=new URL(r);return t.searchParams.delete("s"),t.toString()},(n=function(r){return function(t){return o.pipe(new URL(t),function(t){return r+t.pathname+t.search},c)}}(r)(t),function(r){var t=new URL(r);return t.searchParams.append("s",String(n)),t.toString()}));var n}))}}(n.fromNullable(i)))}},v=function(r,t){return function(n){return o.pipe(h.concat(g,n),b(r,t))}};exports.buildImgixFixed=function(r){var n,e,i=r.url,u=r.secureUrlToken,a=r.args,c=void 0===a?{}:a,s=r.sourceWidth/r.sourceHeight;null!=c.width&&null!=c.height?(n=c.width,e=c.height):null!=c.width?(n=c.width,e=Math.round(n/s)):null!=c.height?(n=Math.round(c.height*s),e=c.height):(n=400,e=Math.round(n/s));var f=v(i,u)(p({},c.imgixParams,c.placeholderImgixParams)),m=b(i,u)(p({},c.imgixParams,{w:n,h:e})),g=function(r,n){return function(e){return o.pipe(d,t.map(function(t){return o.pipe(h.concat(e,{dpr:t}),b(r,n),function(r){return r+" "+t+"x"})}),l(", "))}}(i,u)(p({},c.imgixParams,{w:n,h:e}));return{base64:f,width:n,height:e,src:m,srcWebp:m,srcSet:g,srcSetWebp:g}},exports.buildImgixFluid=function(r){var n,e,a=r.url,c=r.secureUrlToken,s=r.args,f=void 0===s?{}:s,d=r.sourceWidth/r.sourceHeight,g=null!==(n=f.maxWidth)&&void 0!==n?n:800,x=v(a,c)(p({},f.imgixParams,f.placeholderImgixParams)),w=b(a,c)(p({},f.imgixParams,{w:g,h:f.maxHeight})),S=function(r,n){return function(e){return function(a){var c=a.aspectRatio,s=a.maxWidth,f=a.srcSetBreakpoints,p=void 0===f?m.map(function(r){return s*r}):f;return o.pipe(t.cons(s,p),t.uniq(i.eqNumber),t.sort(u.ordNumber),t.map(function(t){return o.pipe(h.concat(e,{w:Math.round(t),h:Math.round(t/c)}),b(r,n),function(r){return r+" "+Math.round(t)+"w"})}),l(", "))}}}(a,c)(null!==(e=f.imgixParams)&&void 0!==e?e:{})({aspectRatio:d,maxWidth:g,srcSetBreakpoints:f.srcSetBreakpoints});return{base64:x,aspectRatio:d,src:w,srcWebp:w,srcSet:S,srcSetWebp:S,sizes:""}},exports.buildImgixUrl=b,exports.transformUrlForWebProxy=function(r,t){var n=new URL("https://"+t);return n.pathname=encodeURIComponent(r),n.toString()};
//# sourceMappingURL=gatsby-plugin-imgix.js.map
