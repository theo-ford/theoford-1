function r(r){return r&&"object"==typeof r&&"default"in r?r.default:r}var e=require("gatsby/graphql"),n=require("fp-ts/lib/Task"),t=require("fp-ts/lib/TaskEither"),i=require("fp-ts/lib/pipeable"),a=require("fp-ts/lib/Array"),u=require("fp-ts/lib/Option"),o=require("fp-ts/lib/Record"),c=require("fp-ts/lib/Eq"),p=require("fp-ts/lib/Ord"),l=r(require("node-fetch")),s=r(require("md5")),f=require("fp-ts/lib/Semigroup"),h=require("fp-ts/lib/function"),d=r(require("imgix-url-params/dist/parameters.json")),g=require("camel-case"),m=require("fp-ts/lib/Apply");function v(){return(v=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r}).apply(this,arguments)}function y(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}var x=function(){},b=function(r,e,n){return i.pipe(function(r,e){return function(){return e.get(r).then(function(r){return u.fromNullable(r)})}}(r,e),t.rightTask,t.chain(u.fold(h.flow(n,t.chain(h.flow(function(r,e){return function(n){return function(){return e.set(r,n).then(function(){return n})}}}(r,e),function(r){return t.rightTask(r)}))),t.right)))},S=function(r){return t.tryCatch(function(){return l(r)},function(r){return new Error(String(r))})},L=(h.flow(S,t.chain(function(r){return t.rightTask(function(){return r.buffer()})}),t.chain(function(r){return t.right(r.toString("base64"))})),f.getObjectSemigroup()),w=function(r){return function(e){return e.join(r)}},G=function(r,e){return function(n){return t.tryCatch(function(){return Promise.resolve(r(n)).then(function(r){return null==r?Promise.reject("Resolved data is null or undefined"):e?e(r)?r:Promise.reject("Resolved data is invalid."):r})},function(r){return new Error(String(r))})}},Q=[1,1.5,2],P=[.25,.5,1.5,2],I={w:100,blur:15,q:20},N=function(r,e){return function(n){return i.pipe(n,o.filterMap(function(r){return u.some(void 0===r?void 0:String(r))}),function(r){return function(e){var n,t,u,c=new URL(r),p=i.pipe(e,o.reduceWithIndex([],function(r,e,n){return void 0===n?a.cons(r,e):e})),l=i.pipe(e,o.filter(function(r){return void 0!==r})),s=(n=c.searchParams,t=new URLSearchParams(l),u=new URLSearchParams(n.toString()),t.forEach(function(r,e){null==r?u.delete(e):u.set(e,r)}),u);return s.forEach(function(r,e){p.includes(e)&&s.delete(e)}),c.search=s.toString(),c.toString()}}(r),function(r){return function(e){return i.pipe(r,u.fold(function(){return e},function(r){return i.pipe(e,function(r){var e=new URL(r);return e.searchParams.delete("s"),e.toString()},(n=function(r){return function(e){return i.pipe(new URL(e),function(e){return r+e.pathname+e.search},s)}}(r)(e),function(r){var e=new URL(r);return e.searchParams.append("s",String(n)),e.toString()}));var n}))}}(u.fromNullable(e)))}},q=function(r,e){return function(n){return i.pipe(L.concat(I,n),N(r,e))}},W=new e.GraphQLInputObjectType({name:"ImgixUrlParamsInput",fields:Object.keys(d.parameters).reduce(function(r,n){var t=d.parameters[n],i=g.camelCase(n),a=Array.from(new Set(t.expects.map(function(r){return r.type}))),u=a.every(function(r){return"integer"===r||"unit_scalar"===r})?e.GraphQLInt:a.every(function(r){return"integer"===r||"unit_scalar"===r||"number"===r})?e.GraphQLFloat:a.every(function(r){return"boolean"===r})?e.GraphQLBoolean:e.GraphQLString;if(r[i]={type:u,description:t.short_description+("."===t.short_description.slice(-1)?"":".")},"default"in t&&(r[i].description=r[i].description+" Default: `"+t.default+"`."),"url"in t&&(r[i].description=r[i].description+" [See docs]("+t.url+")."),"aliases"in t)for(var o,c=function(r,e){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,e){if(r){if("string"==typeof r)return y(r,void 0);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(r,void 0):void 0}}(r))){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=r[Symbol.iterator]()).next.bind(n)}(t.aliases);!(o=c()).done;)r[g.camelCase(o.value)]=v({},r[i],{description:"Alias for `"+i+"`."});return r},{})}),T=m.sequenceT(t.taskEither),U=function(r,e,n,a,u){return function(o){return i.pipe(T(G(e)(r),G(n)(r)),t.fold(function(){return i.pipe(o,function(r,e){return function(n){return b("gatsby-plugin-imgix-metadata-"+n,r,function(){return i.pipe({fm:"json"},N(n,e),function(r){return function(r){return i.pipe(r,S,t.chain(function(r){return t.rightTask(function(){return r.json()})}))}(r)})})}}(a,u),t.map(function(r){return[r.PixelWidth,r.PixelHeight]}))},t.right))}},k=function(r){var a=r.resolveUrl,u=r.secureUrlToken,o=r.defaultImgixParams,c=void 0===o?{}:o;return{type:e.GraphQLString,args:{imgixParams:{type:W,defaultValue:{}}},resolve:function(r,e){return i.pipe(r,G(a),t.map(function(r){var n;return i.pipe(L.concat(c,null!==(n=e.imgixParams)&&void 0!==n?n:{}),N(r,u))}),t.fold(function(){return n.of(void 0)},n.of))()}}},j=function(r){var a=r.resolveUrl,u=void 0===a?function(r){return r.base64}:a,o=r.cache;return{type:new e.GraphQLNonNull(e.GraphQLString),resolve:function(r){return i.pipe(r,G(u),t.chain(function(r){return function(e){return b("gatsby-plugin-imgix-base64-url-"+e,r,function(){return i.pipe(e,S,t.chain(function(r){return i.pipe(t.rightTask(function(){return r.buffer()}),t.chain(function(r){return t.right(r.toString("base64"))}),t.chain(function(e){return t.right(function(r,e){return"data:"+r+";base64,"+e}(String(r.headers.get("content-type")),e))}))}))})}}(o)),t.fold(function(){return n.of(void 0)},n.of))()}}},F=function(r){var u=r.resolveUrl,o=r.resolveWidth,c=void 0===o?x:o,p=r.resolveHeight,l=void 0===p?x:p,s=r.secureUrlToken,f=r.cache,h=r.defaultImgixParams,d=r.defaultPlaceholderImgixParams;return{type:r.type,args:{width:{type:e.GraphQLInt,defaultValue:400},height:{type:e.GraphQLInt},imgixParams:{type:W,defaultValue:{}},placeholderImgixParams:{type:W,defaultValue:{}}},resolve:function(r,e){return i.pipe(r,G(u,function(r){return"string"==typeof r}),t.chain(function(n){return i.pipe(n,U(r,c,l,f,s),t.map(function(r){return function(r){var e,n,t=r.url,u=r.secureUrlToken,o=r.args,c=void 0===o?{}:o,p=r.sourceWidth/r.sourceHeight;null!=c.width&&null!=c.height?(e=c.width,n=c.height):null!=c.width?(e=c.width,n=Math.round(e/p)):null!=c.height?(e=Math.round(c.height*p),n=c.height):(e=400,n=Math.round(e/p));var l=q(t,u)(v({},c.imgixParams,c.placeholderImgixParams)),s=N(t,u)(v({},c.imgixParams,{w:e,h:n})),f=function(r,e){return function(n){return i.pipe(Q,a.map(function(t){return i.pipe(L.concat(n,{dpr:t}),N(r,e),function(r){return r+" "+t+"x"})}),w(", "))}}(t,u)(v({},c.imgixParams,{w:e,h:n}));return{base64:l,width:e,height:n,src:s,srcWebp:s,srcSet:f,srcSetWebp:f}}({url:n,sourceWidth:r[0],sourceHeight:r[1],secureUrlToken:s,args:v({},e,{imgixParams:v({},h,e.imgixParams),placeholderImgixParams:v({},d,e.placeholderImgixParams)})})}))}),t.getOrElseW(function(){return n.of(void 0)}))()}}},O=function(r){var u=r.resolveUrl,o=r.resolveWidth,l=void 0===o?x:o,s=r.resolveHeight,f=void 0===s?x:s,h=r.secureUrlToken,d=r.cache,g=r.defaultImgixParams,m=r.defaultPlaceholderImgixParams;return{type:r.type,args:{maxWidth:{type:e.GraphQLInt,defaultValue:800},maxHeight:{type:e.GraphQLInt},srcSetBreakpoints:{type:new e.GraphQLList(e.GraphQLInt)},imgixParams:{type:W,defaultValue:{}},placeholderImgixParams:{type:W,defaultValue:{}}},resolve:function(r,e){return i.pipe(r,G(u,function(r){return"string"==typeof r}),t.chain(function(n){return i.pipe(n,U(r,l,f,d,h),t.map(function(r){return function(r){var e,n,t=r.url,u=r.secureUrlToken,o=r.args,l=void 0===o?{}:o,s=r.sourceWidth/r.sourceHeight,f=null!==(e=l.maxWidth)&&void 0!==e?e:800,h=q(t,u)(v({},l.imgixParams,l.placeholderImgixParams)),d=N(t,u)(v({},l.imgixParams,{w:f,h:l.maxHeight})),g=function(r,e){return function(n){return function(t){var u=t.aspectRatio,o=t.maxWidth,l=t.srcSetBreakpoints,s=void 0===l?P.map(function(r){return o*r}):l;return i.pipe(a.cons(o,s),a.uniq(c.eqNumber),a.sort(p.ordNumber),a.map(function(t){return i.pipe(L.concat(n,{w:Math.round(t),h:Math.round(t/u)}),N(r,e),function(r){return r+" "+Math.round(t)+"w"})}),w(", "))}}}(t,u)(null!==(n=l.imgixParams)&&void 0!==n?n:{})({aspectRatio:s,maxWidth:f,srcSetBreakpoints:l.srcSetBreakpoints});return{base64:h,aspectRatio:s,src:d,srcWebp:d,srcSet:g,srcSetWebp:g,sizes:""}}({url:n,sourceWidth:r[0],sourceHeight:r[1],secureUrlToken:h,args:v({},e,{imgixParams:v({},g,e.imgixParams),placeholderImgixParams:v({},m,e.placeholderImgixParams)})})}))}),t.getOrElseW(function(){return n.of(void 0)}))()}}};exports.createImgixFixedFieldConfig=F,exports.createImgixFixedSchemaFieldConfig=function(r){return F(r)},exports.createImgixFixedType=function(r){return new e.GraphQLObjectType({name:r.name,fields:{base64:j({cache:r.cache}),src:{type:new e.GraphQLNonNull(e.GraphQLString)},srcSet:{type:new e.GraphQLNonNull(e.GraphQLString)},srcWebp:{type:new e.GraphQLNonNull(e.GraphQLString)},srcSetWebp:{type:new e.GraphQLNonNull(e.GraphQLString)},sizes:{type:new e.GraphQLNonNull(e.GraphQLString)},width:{type:new e.GraphQLNonNull(e.GraphQLInt)},height:{type:new e.GraphQLNonNull(e.GraphQLInt)}}})},exports.createImgixFluidFieldConfig=O,exports.createImgixFluidSchemaFieldConfig=function(r){return O(r)},exports.createImgixFluidType=function(r){return new e.GraphQLObjectType({name:r.name,fields:{base64:j({cache:r.cache}),src:{type:new e.GraphQLNonNull(e.GraphQLString)},srcSet:{type:new e.GraphQLNonNull(e.GraphQLString)},srcWebp:{type:new e.GraphQLNonNull(e.GraphQLString)},srcSetWebp:{type:new e.GraphQLNonNull(e.GraphQLString)},sizes:{type:new e.GraphQLNonNull(e.GraphQLString)},aspectRatio:{type:new e.GraphQLNonNull(e.GraphQLFloat)}}})},exports.createImgixUrlFieldConfig=k,exports.createImgixUrlSchemaFieldConfig=function(r){return k(r)};
//# sourceMappingURL=node.js.map
