{"version":3,"file":"gatsby-ssr.modern.js","sources":["../src/gatsby-ssr.ts"],"sourcesContent":["import React from 'react'\nimport { GatsbySSR, RenderBodyArgs } from 'gatsby'\n\nimport { PluginOptions } from './types'\n\nexport const onRenderBody: NonNullable<GatsbySSR['onRenderBody']> = async (\n  gatsbyContext: RenderBodyArgs,\n  pluginOptions: PluginOptions,\n) => {\n  const { setPostBodyComponents } = gatsbyContext\n\n  if (!pluginOptions.prismicToolbar) return\n\n  let toolbarScriptUrl: string\n\n  switch (pluginOptions.prismicToolbar) {\n    // Use the latest script URL. Note the `new` URL parameter.\n    case true: {\n      toolbarScriptUrl = `//static.cdn.prismic.io/prismic.js?repo=${pluginOptions.repositoryName}&new=true`\n      break\n    }\n\n    // Use the legacy script URL for older repositories. Note the lack of the\n    // `new` URL parameter.\n    case 'legacy': {\n      toolbarScriptUrl = `//static.cdn.prismic.io/prismic.js?repo=${pluginOptions.repositoryName}`\n      break\n    }\n  }\n\n  const toolbarScript = React.createElement('script', {\n    src: toolbarScriptUrl,\n    defer: true,\n  })\n\n  setPostBodyComponents([toolbarScript])\n}\n"],"names":["onRenderBody","async","gatsbyContext","pluginOptions","setPostBodyComponents","prismicToolbar","toolbarScriptUrl","repositoryName","React","createElement","src","defer"],"mappings":"qBAKaA,MAAAA,EAAuDC,MAClEC,EACAC,KAEA,MAAMC,sBAAEA,GAA0BF,EAElC,IAAKC,EAAcE,eAAgB,OAEnC,IAAIC,EAEJ,OAAQH,EAAcE,gBAEpB,OACEC,6CAA8DH,EAAcI,0BAC5E,MAKF,IAAK,SACHD,6CAA8DH,EAAcI,eAUhFH,EAAsB,CALAI,EAAMC,cAAc,SAAU,CAClDC,IAAKJ,EACLK,OAAO"}